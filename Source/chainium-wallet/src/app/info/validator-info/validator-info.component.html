<div class="container mt-5 mb-5">
  <div class="row justify-content-center">
    <div class="col-12 col-md-6">
        <div class="input-group">
            <input
            class="form-control"
            type="text"
            placeholder="Search by validator hash"
            [value]="validatorHash"
            (input)="validatorHash = $event.target.value"
            (keydown.enter)="onValidatorInfoButtonClick()"
            required>
            <button class="search-button" (click)="onValidatorInfoButtonClick()" title="Click to get detailed address info.">
                <own-icon icon="search"></own-icon>
            </button>
            </div>
        </div>
    </div>
</div>

<ng-container *ngIf="validatorsInfo">
  <div class="container my-5" @contentInOut>
    <div class="row">
      <div class="col-12">

        <div class="card">
          <p class="m-0 card-title p-4">
            <b>Validators</b>
          </p>

          <ngx-datatable
            class="wallet-table"
            [rows]="validatorsInfo.validators"
            [columnMode]="ColumnMode.flex"
            [headerHeight]="50"
            [footerHeight]="0"
            rowHeight="auto">

            <ngx-datatable-column name="isActive" [flexGrow]="1" [maxWidth]="40">
              <ng-template let-column="column" ngx-datatable-header-template></ng-template>
              <ng-template let-value="value" ngx-datatable-cell-template>
              <ng-container *ngIf="value">
                <svg viewBox="0 0 507.2 507.2" width="25">
                  <circle style="fill:#32BA7C;" cx="253.6" cy="253.6" r="253.6"/>
                  <path style="fill:#FFFFFF;" d="M260,310.4c11.2,11.2,11.2,30.4,0,41.6l-23.2,23.2c-11.2,11.2-30.4,11.2-41.6,0L93.6,272.8
                      c-11.2-11.2-11.2-30.4,0-41.6l23.2-23.2c11.2-11.2,30.4-11.2,41.6,0L260,310.4z"/>
                  <path style="fill:#FFFFFF;" d="M348.8,133.6c11.2-11.2,30.4-11.2,41.6,0l23.2,23.2c11.2,11.2,11.2,30.4,0,41.6l-176,175.2
                      c-11.2,11.2-30.4,11.2-41.6,0l-23.2-23.2c-11.2-11.2-11.2-30.4,0-41.6L348.8,133.6z"/>
                </svg>
              </ng-container>
                <ng-container *ngIf="!value">
                  <svg viewBox="0 0 512 512" width="25">
                    <circle style="fill:#E21B1B;" cx="256" cy="256" r="256"/>
                    <path style="fill:#FFFFFF;" d="M354.376,371.536c-5.12,0-10.232-1.952-14.144-5.856L146.408,171.848
                        c-7.816-7.816-7.816-20.472,0-28.28s20.472-7.816,28.28,0L368.52,337.4c7.816,7.816,7.816,20.472,0,28.28
                        C364.608,369.584,359.496,371.536,354.376,371.536z"/>
                    <path style="fill:#FFFFFF;" d="M160.544,371.536c-5.12,0-10.232-1.952-14.144-5.856c-7.816-7.816-7.816-20.472,0-28.28
                        l193.832-193.832c7.816-7.816,20.472-7.816,28.28,0s7.816,20.472,0,28.28L174.688,365.68
                        C170.784,369.584,165.664,371.536,160.544,371.536z"/>
                  </svg>
                </ng-container>
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="validatorAddress"  [flexGrow]="8">
              <ng-template let-column="column" ngx-datatable-header-template>
                Address
              </ng-template>
              <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                  <a [routerLink]="['/info/validator', value]">
                    {{ value }}
                  </a>
                <br>
                {{ row.networkAddress }}
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="sharedRewardPercent" [flexGrow]="1">
              <ng-template let-column="column" ngx-datatable-header-template>Reward %</ng-template>
              <ng-template let-value="value" ngx-datatable-cell-template>
                {{ value }}
              </ng-template>
            </ngx-datatable-column>

          </ngx-datatable>

        </div>
      </div>
    </div>
  </div>
</ng-container>

<ng-container *ngIf="validatorStakes">
  <div class="container my-5" @contentInOut>
    <div class="row">
      <div class="col-12">

        <div class="card">
          <p class="m-0 card-title p-4">
            <b>Stakes</b>
          </p>

          <ngx-datatable
            class="wallet-table"
            [rows]="validatorStakes.stakes"
            [columnMode]="ColumnMode.flex"
            [headerHeight]="50"
            [footerHeight]="0"
            rowHeight="auto">

            <ngx-datatable-column name="stakerAddress" [flexGrow]="8">
              <ng-template let-column="column" ngx-datatable-header-template>
                Staker Address
              </ng-template>
              <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                <strong>
                  <a [routerLink]="['/info/address', value]">
                    {{ value }}
                  </a>
                </strong>
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column name="amount" [flexGrow]="1">
              <ng-template let-column="column" ngx-datatable-header-template>Amount</ng-template>
              <ng-template let-value="value" ngx-datatable-cell-template>
                {{ value }}
              </ng-template>
            </ngx-datatable-column>

          </ngx-datatable>

        </div>
      </div>
    </div>
  </div>
</ng-container>
