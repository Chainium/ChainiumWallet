<div class="container mt-5 mb-5">
    <div class="row justify-content-center">
      <div class="col-12 col-md-6">
        <div class="input-group">
          <input
            class="form-control"
            type="text"
            placeholder="Search by transaction hash"
            [value]="transactionHash"
            (input)="transactionHash = $event.target.value"
            (keydown.enter)="onTransactionInfoButtonClick()"
            required>
            <button class="search-button" (click)="onTransactionInfoButtonClick()" title="Click to get detailed transaction info.">
              <svg width="20px" viewBox="0 0 475.084 475.084">
                <path class="search-icon" d="M464.524,412.846l-97.929-97.925c23.6-34.068,35.406-72.047,35.406-113.917c0-27.218-5.284-53.249-15.852-78.087 c-10.561-24.842-24.838-46.254-42.825-64.241c-17.987-17.987-39.396-32.264-64.233-42.826 C254.246 5.285,228.217,0.003,200.999,0.003c-27.216,0-53.247,5.282-78.085,15.847C98.072,26.412,76.66,40.689,58.673,58.676 c-17.989,17.987-32.264,39.403-42.827,64.241C5.282,147.758,0,173.786,0,201.004c0,27.216,5.282,53.238,15.846,78.083 c10.562,24.838,24.838,46.247,42.827,64.234c17.987,17.993,39.403,32.264,64.241,42.832c24.841,10.563,50.869,15.844,78.085,15.844 c41.879,0,79.852-11.807,113.922-35.405l97.929,97.641c6.852,7.231,15.406,10.849,25.693,10.849 c9.897,0,18.467-3.617,25.694-10.849c7.23-7.23,10.848-15.796,10.848-25.693C475.088,428.458,471.567,419.889,464.524,412.846z M291.363,291.358c-25.029,25.033-55.148,37.549-90.364,37.549c-35.21,0-65.329-12.519-90.36-37.549 c-25.031-25.029-37.546-55.144-37.546-90.36c0-35.21,12.518-65.334,37.546-90.36c25.026-25.032,55.15-37.546,90.36-37.546 c35.212,0,65.331,12.519,90.364,37.546c25.033,25.026,37.548,55.15,37.548,90.36C328.911,236.214,316.392,266.329,291.363,291.358z" />
              </svg>
            </button>
        </div>
      </div>
    </div>
  </div>

  <ng-container *ngIf="txInfo && ready">
    <div class="container mt-5 mb-3 mb-md-0">
      <div class="row">
        <div class="col-12 col-md-8">
          <div class="card p-4 p-md-5">
            <div class="row justify-content-between align-items-center">
              <div class="col-8">
                  <div class="col-12">
                      <b>Transaction Hash</b>
                  </div>
                  <div class="col-12 mt-2 text-truncate">
                    {{ txInfo.txHash }}
                  </div>
              </div>
              <div class="col-4 text-center border-left">
                  <div class="col-12 pt-2 pt-md-0">
                      <b>Block number</b>
                  </div>
                  <div class="col-12 mt-2">
                    {{ txInfo.includedInBlockNumber }}
                  </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4 px-5 px-md-0">
          <div class="p-0 p-md-5 mt-5 mt-md-0">
            <div class="row full-height justify-content-center align-items-center">
              <div class="col-12">
                <b>From</b>
              </div>
              <div class="col-12 text-truncate">
                {{txInfo.senderAddress}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container mt-5 px-5 border-top">
      <div class="row mt-5 mt-md-0">
        <div class="col-12 col-md-6">
          <div class="row">
            <div class="col">
              <b>Nonce</b>
            </div>
            <div class="col border-right text-right">
              {{ txInfo.nonce }}
            </div>
          </div>
          <div class="row mt-4">
            <div class="col">
              <b>Expiration time</b>
            </div>
            <div class="col border-right text-right">
              {{ txInfo.expirationTime | date: 'yyyy-MM-dd, HH:mm:ss' }}
            </div>
          </div>
        </div>
        <div class="col-12 col-md-6 border-top mt-5 mt-md-0">
          <div class="row mt-5 mt-md-0">
            <div class="col">
              <b>Action fee</b>
            </div>
            <div class="col text-right">
              {{ txInfo.actionFee }} CHX
            </div>
          </div>
          <div class="row mt-4">
            <div class="col">
              <b>Total fee</b>
            </div>
            <div class="col text-right">
              {{ totalFee }} CHX
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container mt-5">
      <div class="row">
        <div class="col">

          <!-- ACTIONS INFORMATION -->
          <div class="col-12 mt-3 mb-5">
            <div class="row justify-content-between">
              <div class="col-8">
                <h5 class="m-0">Actions</h5>
              </div>
              <div class="col-1">
                <svg
                  class="cursor-pointer"
                  (click)="expandActions()"
                  width="20px"
                  viewBox="0 0 444.819 444.819">
                  <path *ngIf="!actionsExpanded" d="M434.252,114.203l-21.409-21.416c-7.419-7.04-16.084-10.561-25.975-10.561c-10.095,0-18.657,3.521-25.7,10.561 L222.41,231.549L83.653,92.791c-7.042-7.04-15.606-10.561-25.697-10.561c-9.896,0-18.559,3.521-25.979,10.561l-21.128,21.416 C3.615,121.436,0,130.099,0,140.188c0,10.277,3.619,18.842,10.848,25.693l185.864,185.865c6.855,7.23,15.416,10.848,25.697,10.848 c10.088,0,18.75-3.617,25.977-10.848l185.865-185.865c7.043-7.044,10.567-15.608,10.567-25.693 C444.819,130.287,441.295,121.629,434.252,114.203z" />
                  <path *ngIf="actionsExpanded" d="M433.968,278.657L248.387,92.79c-7.419-7.044-16.08-10.566-25.977-10.566c-10.088,0-18.652,3.521-25.697,10.566 L10.848,278.657C3.615,285.887,0,294.549,0,304.637c0,10.28,3.619,18.843,10.848,25.693l21.411,21.413 c6.854,7.23,15.42,10.852,25.697,10.852c10.278,0,18.842-3.621,25.697-10.852L222.41,213.271L361.168,351.74 c6.848,7.228,15.413,10.852,25.7,10.852c10.082,0,18.747-3.624,25.975-10.852l21.409-21.412 c7.043-7.043,10.567-15.608,10.567-25.693C444.819,294.545,441.205,285.884,433.968,278.657z" />
                </svg>
              </div>
            </div>
            <hr>
            <div class="card-body mt-2" *ngIf="actionsExpanded">

              <div id="actions-lit" class="row">
                <div class="col-12 head">
                  <div class="row">
                    <div class="col-2"></div>
                    <div class="col-8">
                      <b>Type</b>
                    </div>
                    <div class="col-2">
                      <b>Number</b>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div
                    class="row detail-info mt-3"
                    *ngFor="let action of txInfo.actions; let i = index"
                    [attr.data-custom_index]="i">
                    <div class="col-2">
                      <div class="float-left">
                        <svg
                          class="cursor-pointer"
                          (click)="expandActionData(action, i)"
                          width="20px"
                          viewBox="0 0 444.819 444.819">
                          <path *ngIf="expandedTransactionActions && expandedTransactionActions.custom_index === i"
                            d="M433.968,278.657L248.387,92.79c-7.419-7.044-16.08-10.566-25.977-10.566c-10.088,0-18.652,3.521-25.697,10.566 L10.848,278.657C3.615,285.887,0,294.549,0,304.637c0,10.28,3.619,18.843,10.848,25.693l21.411,21.413 c6.854,7.23,15.42,10.852,25.697,10.852c10.278,0,18.842-3.621,25.697-10.852L222.41,213.271L361.168,351.74 c6.848,7.228,15.413,10.852,25.7,10.852c10.082,0,18.747-3.624,25.975-10.852l21.409-21.412 c7.043-7.043,10.567-15.608,10.567-25.693C444.819,294.545,441.205,285.884,433.968,278.657z"
                          />
                          <path *ngIf="!(expandedTransactionActions && expandedTransactionActions.custom_index === i)"
                            d="M352.025,196.712L165.884,10.848C159.029,3.615,150.469,0,140.187,0c-10.282,0-18.842,3.619-25.697,10.848L92.792,32.264 c-7.044,7.043-10.566,15.604-10.566,25.692c0,9.897,3.521,18.56,10.566,25.981l138.753,138.473L92.786,361.168 c-7.042,7.043-10.564,15.604-10.564,25.693c0,9.896,3.521,18.562,10.564,25.98l21.7,21.413 c7.043,7.043,15.612,10.564,25.697,10.564c10.089,0,18.656-3.521,25.697-10.564l186.145-185.864 c7.046-7.423,10.571-16.084,10.571-25.981C362.597,212.321,359.071,203.755,352.025,196.712z"
                          />
                      </svg>
                      </div>
                    </div>

                    <div class="col-8">
                      <p class="info-value" (click)="expandActionData(action, i)">{{ action.actionType | camelToSpace }}</p>
                    </div>

                    <div class="col-2">
                      <p class="info-value">{{ i + 1 }}</p>
                    </div>

                    <div
                      class="col-12"
                      *ngIf="expandedTransactionActions && expandedTransactionActions.custom_index === i"
                    >
                      <div *ngFor="let item of expandedTransactionActions | keyvalue">
                        <div
                          class="row details-row-item"
                          *ngIf="!(item.key === 'custom_index' || item.key === 'isEmpty')"
                        >
                          <div class="col-12 col-md-4">
                            <b class="info-value">{{ item.key | camelToSpace }}</b>
                          </div>
                          <div class="col-12 col-md-8">
                            <p>{{ item.value }}</p>
                          </div>
                        </div>
                      </div>
                      <div *ngIf="action.actionData === {}">
                        <div class="row details-row-item">
                          <div class="col-8">
                            <p class="info-value">No action data</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
  </div>
</ng-container>

<div *ngIf="errors">
  <h6>Errors</h6>
  <hr>
  <ul>
    <li *ngFor="let error of errors">{{error}}</li>
  </ul>
</div>
